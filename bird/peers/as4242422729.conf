# Peer: lenny (AS4242422729) - IPv6 Link-Local with MP-BGP and Extended Next Hop
protocol bgp lenny_v6 from dnpeers {
    enable extended messages on;
    bfd graceful;
    local fe80::2729:2 as 4242420257;
    neighbor fe80::2729:1 as 4242422729;
    interface "wg-as4242422729";
    description "lenny - AS4242422729 - IPv6 LL with MP-BGP";
    direct;

    # Increase BGP timers for flaky connection
    hold time 240;
    keepalive time 80;

    # Enable MP-BGP: Exchange IPv4 routes over IPv6 session with Extended Next Hop
    ipv4 {
        extended next hop yes;
        import keep filtered;
        import filter {
            if is_valid_network_v4() && !is_self_net_v4() then {
                accept;
            }
            reject;
        };
        export filter {
            if is_valid_network_v4() then {
                accept;
            }
            reject;
        };
    };

    ipv6 {
        import keep filtered;
        import filter {
            if is_valid_network_v6() && !is_self_net_v6() then {
                accept;
            }
            reject;
        };
        export filter {
            if is_valid_network_v6() then {
                accept;
            }
            reject;
        };
    };
}
